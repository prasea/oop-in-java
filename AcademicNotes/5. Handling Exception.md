# **UNIT 5: Handling Errors and Exceptions in Java**

---

## **1. Introduction to Errors and Exceptions**

### **1.1 What is an Error?**

An **error** is a serious problem that occurs during program execution and is generally **beyond the control of the programmer**.

Examples:

* Out of memory
* Stack overflow
* Hardware failure

```java
// Example: StackOverflowError
void recursive() {
    recursive();
}
```

Errors belong to the `Error` class and are **not normally handled**.

---

### **1.2 What is an Exception?**

An **exception** is an **abnormal condition** that occurs during the execution of a program and **disrupts the normal flow** of instructions.

**Exam Definition:**

> An exception is an event that occurs during program execution which disturbs the normal flow of the program.

---

### **Difference Between Error and Exception**

| Error                  | Exception               |
| ---------------------- | ----------------------- |
| Serious problem        | Recoverable condition   |
| Not handled by program | Can be handled          |
| Caused by environment  | Caused by program logic |


---

## **2. Basic Exceptions in Java**

Java provides a large number of **built-in exceptions**.

---

### **2.1 Common Built-in Exceptions**

| Exception                        | Cause                 |
| -------------------------------- | --------------------- |
| `ArithmeticException`            | Divide by zero        |
| `NullPointerException`           | Accessing null object |
| `ArrayIndexOutOfBoundsException` | Invalid array index   |
| `NumberFormatException`          | Invalid number format |
| `ClassNotFoundException`         | Class not found       |

---

### **Example: ArithmeticException**

```java
public class TestException {
  public static void main(String[] args) {
    int a = 10;
    int b = 0;
    int c = a / b;   // Exception occurs
  }
}
```

---

### **Exception Hierarchy**

```
Object
 └── Throwable
     ├── Error
     └── Exception
```

**Important Exam Note:** All exceptions are subclasses of `Throwable`.

---

## **3. Proper Use of Exceptions**

### **Why Use Exception Handling?**

* Prevent abnormal termination
* Separate error handling from normal code
* Improve program reliability
* Simplify debugging and maintenance

**Best Practices**

* Use exceptions only for exceptional conditions
* Catch specific exceptions
* Avoid empty catch blocks
* Use finally for cleanup

---

### **Case Study: Banking System**

In a banking application:

* Invalid account number → `InvalidAccountException`
* Insufficient balance → `InsufficientBalanceException`

This avoids system crash and improves user experience.

---

## **4. Catching Exceptions: `try` and `catch`**

---

### **4.1 `try` Block**

The `try` block contains **code that may cause an exception**.

```java
try {
    int result = 10 / 0;
}
```

---

### **4.2 `catch` Block**

The `catch` block handles the exception.

```java
catch (ArithmeticException e) {
    System.out.println("Division by zero not allowed");
}
```

---

### **Complete Example**

```java
public class TestException {
  public static void main(String[] args) {
    int a = 10;
    int b = 0;
    try {
      int c = a / b;   // Exception occurs
    } catch (ArithmeticException e) {
      System.out.println("Error: " + e);
    }
  }
}
```

Program continues execution after handling exception.

---

### **Multiple `catch` Blocks**

```java
try {
    int arr[] = new int[5];
    arr[0] = 10;
    arr[1] = 0;
    arr[2] = 30;
    arr[3] = 40;
    arr[4] = 50;
    int c = arr[0] / arr[1];
    arr[5] = 60;
} catch (ArithmeticException e) {
    System.out.println("Arithmetic Error");
} catch (ArrayIndexOutOfBoundsException e) {
    System.out.println("Array Index Error");
} catch(Exception e) {
    System.out.println(e);
}
```

More specific exceptions should be caught **first**.

---

Exception propagation is the process by which an exception moves **up the call stack** until it is handled.
If no method handles it, the exception reaches the JVM → program crashes.

```java 
public class ExceptionDemo {
    static void method2(int a, int b) {
      int c = a / b; // b = 0 → ArithmeticException
      return c;      // will NOT execute
    }
    
    static void method1() {
      int r = method2(10,0);
      System.out.prinln(r)
    }

    public static void main(String[] args) {
      method1();
    }
}
```


## **5. Throwing Exceptions: `throw` and `throws`**

### **5.1 `throw` Keyword**

The `throw` keyword is used to **explicitly throw an exception**. 
- `throw` is used **inside a method body**.
- It throws an **object** (typically `new Exception(message)`).
- Throwing an exception **stops the method** immediately.
- Any statements after `throw` will not execute.


---

### **Example**

```java
public class ThrowExceptionDemo {
    static int area(int length, int breadth) {
        try {            
            if (length < 0 || breadth < 0) {
                throw new Exception("Length and breadth cannot be negative");
            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
        return length * breadth;
    }

    static void method1() {
        int a = area(-10, 5);
        System.out.println(a);
    }

    public static void main(String[] args) {
        method1();
    }
}
```

---

### **5.2 `throws` Keyword**

The `throws` keyword is used to **declare exceptions** that a method may pass to the calling method.
Informs caller: “This method may throw an exception. **You must handle it**.”
Responsibility of handling exception is transferred to caller.

---

### **Example**

```java
public class ThrowsExceptionDemo {
    static int area(int length, int breadth) throws Exeption {
        if (length < 0 || breadth < 0) {
            throw new Exception("Length and breadth cannot be negative");
        }
        return length * breadth;
    }

    static void method1() {
        try {
            int a = area(-10, 5);
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }

    public static void main(String[] args) {
        method1();
    }
}
```

---

### **Difference Between `throw` and `throws`**

| throw                | throws                       |
| -------------------- | ---------------------------- |
| Throws one exception | Declares multiple exceptions |
| Used inside method   | Used in method signature     |
| Creates exception    | Passes exception             |

---


## **6. Re-throwing an Exception**

### **Meaning**

An exception that is **caught and thrown again** is called **re-throwing**. It Useful when multiple levels of handling are needed.

---

### **Example**

```java
public class ReThrowExceptionDemo {
    static void method1() {
        String s = "Java";
        try {
            char c = s.charAt(4);
        } catch (StringIndexOutOfBoundsException sie) {
            System.out.println("Please check the index");
            throw sie;
        }
    }

    public static void main(String[] args) {
        try {
            method1();
        } catch (StringIndexOutOfBoundsException e) {
            System.out.println(e.getMessage());
        }
    }
}
```

---


## **7. User-Defined Exceptions**

### **Meaning**

A **user-defined exception** is an exception created by the programmer to handle **application-specific errors**.

---

### **Steps to Create User-Defined Exception**

1. Extend `Exception` class
2. Provide constructor
3. Use `throw` to raise it

---

### **Example**

```java
class InvalidAgeException extends Exception {
    pubilc InvalidAgeException(String msg) {
        super(msg);
    }
}

class Test {
    static void checkAge(int age) throws InvalidAgeException {
        if (age < 18)
            throw new InvalidAgeException("Age below 18");
    }
}
```

---

## **8. Cleaning Up Using `finally` Clause**

### **Meaning**

The `finally` block contains **important code that must be executed**, whether an exception occurs or not.

Common Uses:

* Closing files
* Releasing resources
* Database connection cleanup

---

### **Syntax**

```java
try {
    // risky code
} catch (Exception e) {
    // handling
} finally {
    // cleanup code
}
```

---

### **Example**

```java
try {
    int x = 10 / 2;
} catch (Exception e) {
    System.out.println(e);
} finally {
    System.out.println("Execution completed");
}
```

`finally` always executes except in abnormal JVM termination.


## **9. Summary (Exam-Focused)**

* Exceptions handle runtime errors
* Java uses structured exception handling
* `try` encloses risky code
* `catch` handles exception
* `throw` explicitly raises exception
* `throws` declares exception
* User-defined exceptions improve clarity
* `finally` ensures resource cleanup

---


Q. How to handle multiple catch block for nested try block? Explain with an example [2024]

In Java, **nested try–catch blocks** are used when a section of code may throw **different exceptions at different levels**, and you want to handle them **separately and precisely**.

* The **inner `try` block** handles exceptions related to a specific operation.
* If an exception occurs inside the inner `try`, Java first looks for a matching **inner `catch`**.
* If not handled there, the exception **propagates to the outer `try` block**.
* The **outer `catch`** handles exceptions that occur outside the inner `try` or those not handled inside.


This approach is useful when different parts of code need **different exception handling logic**.


```java
public static void main(String[] args) {
    int num1 = 10;
    int num2 = 0;

    int[] num3 = {1, 2, 3, 4, 5};//int[] num3 = new int[5];

    try {
        try {                
            System.out.println(num3[5]);
        } catch (ArrayIndexOutOfBoundsException ex) {
            System.out.println(ex);
        }
        int r = num1 / num2;
    } catch (ArithmeticException ex) {
        System.out.println(ex);
    }
    System.out.println("Thank you for using our program");
}
```

1. `num3[5]` throws **ArrayIndexOutOfBoundsException**.
2. It is **caught by the inner catch block**, so the program continues.
3. `num1 / num2` throws **ArithmeticException** (division by zero).
4. This is **caught by the outer catch block**.
5. Program continues normally and prints:
